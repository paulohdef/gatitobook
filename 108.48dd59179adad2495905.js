"use strict";(self.webpackChunkgatitobook=self.webpackChunkgatitobook||[]).push([[108],{108:(O,d,u)=>{u.r(d),u.d(d,{HomeModule:()=>B});var c=u(8583),i=u(665);function N(e){const t=e.value;return t!==t.toLowerCase()?{minusculo:!0}:null}function C(e){var t,n,r,s;const a=null!==(n=null===(t=e.get("userName"))||void 0===t?void 0:t.value)&&void 0!==n?n:"",m=null!==(s=null===(r=e.get("password"))||void 0===r?void 0:r.value)&&void 0!==s?s:"";return a.trim()+m.trim()?a!==m?null:{senhaIgualUsuario:!0}:null}var o=u(639),v=u(2340),f=u(1841);const h=v.N.apiURL;let U=(()=>{class e{constructor(n){this.http=n}cadastraNovoUsuario(n){return this.http.post(`${h}/user/signup`,n)}verificaUsuarioExistente(n){return this.http.get(`${h}/user/exists/${n}`)}}return e.\u0275fac=function(n){return new(n||e)(o.LFG(f.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var F=u(3190),_=u(8002),T=u(8049);let A=(()=>{class e{constructor(n){this.novoUsuarioService=n}usuarioJaExiste(){return n=>n.valueChanges.pipe((0,F.w)(r=>this.novoUsuarioService.verificaUsuarioExistente(r)),(0,_.U)(r=>r?{usuarioExistente:!0}:null),(0,T.P)())}}return e.\u0275fac=function(n){return new(n||e)(o.LFG(U))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=u(8216),Z=u(6341);function E(e,t){1&e&&o._UZ(0,"app-mensagem",16)}function I(e,t){1&e&&o._UZ(0,"app-mensagem",17)}function S(e,t){1&e&&o._UZ(0,"app-mensagem",18)}function J(e,t){1&e&&o._UZ(0,"app-mensagem",19)}function L(e,t){1&e&&o._UZ(0,"app-mensagem",20)}function b(e,t){1&e&&o._UZ(0,"app-mensagem",21)}const y=function(){return[""]};let M=(()=>{class e{constructor(n,r,s,a){this.formBuilder=n,this.novoUsuarioService=r,this.usuarioExistenteService=s,this.router=a}ngOnInit(){this.novoUsuarioForm=this.formBuilder.group({email:["",[i.kI.required,i.kI.email]],fullName:["",[i.kI.required,i.kI.minLength(4)]],userName:["",[N],[this.usuarioExistenteService.usuarioJaExiste()]],password:[""]},{validators:[C]})}cadastrar(){if(this.novoUsuarioForm.valid){const n=this.novoUsuarioForm.getRawValue();this.novoUsuarioService.cadastraNovoUsuario(n).subscribe(()=>{this.router.navigate([""])})}}}return e.\u0275fac=function(n){return new(n||e)(o.Y36(i.qu),o.Y36(U),o.Y36(A),o.Y36(l.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-novo-usuario"]],decls:23,vars:9,consts:[[1,"text-center"],[1,"form","mt-4","d-grid","gap-3",3,"formGroup","submit"],[1,"orm-group"],["placeholder","e-mail","formControlName","email",1,"form-control"],["mensagem","E-mail obrigat\xf3rio",4,"ngIf"],["mensagem","E-mail no formato incorreto",4,"ngIf"],[1,"form-group"],["placeholder","Nome Completo","formControlName","fullName",1,"form-control"],["mensagem","Nome incorreto",4,"ngIf"],["placeholder","Usu\xe1rio","formControlName","userName",1,"form-control"],["mensagem","Usu\xe1rio deve ser em letra min\xfascula",4,"ngIf"],["mensagem","Usu\xe1rio j\xe1 existente",4,"ngIf"],["placeholder","Password","formControlName","password",1,"form-control"],["mensagem","A senha deve ser diferente do usu\xe1rio",4,"ngIf"],[1,"btn","btn-primary","btn-block"],[3,"routerLink"],["mensagem","E-mail obrigat\xf3rio"],["mensagem","E-mail no formato incorreto"],["mensagem","Nome incorreto"],["mensagem","Usu\xe1rio deve ser em letra min\xfascula"],["mensagem","Usu\xe1rio j\xe1 existente"],["mensagem","A senha deve ser diferente do usu\xe1rio"]],template:function(n,r){if(1&n&&(o.TgZ(0,"h4",0),o._uU(1,"Registre-se e mostre seu pet ao mundo!"),o.qZA(),o.TgZ(2,"form",1),o.NdJ("submit",function(){return r.cadastrar()}),o.TgZ(3,"div",2),o._UZ(4,"input",3),o.YNc(5,E,1,0,"app-mensagem",4),o.YNc(6,I,1,0,"app-mensagem",5),o.qZA(),o.TgZ(7,"div",6),o._UZ(8,"input",7),o.YNc(9,S,1,0,"app-mensagem",8),o.qZA(),o.TgZ(10,"div",6),o._UZ(11,"input",9),o.YNc(12,J,1,0,"app-mensagem",10),o.YNc(13,L,1,0,"app-mensagem",11),o.qZA(),o.TgZ(14,"div",6),o._UZ(15,"input",12),o.qZA(),o.YNc(16,b,1,0,"app-mensagem",13),o.TgZ(17,"button",14),o._uU(18,"Cadastro"),o.qZA(),o.qZA(),o.TgZ(19,"p"),o._uU(20,"J\xe1 \xe9 um usu\xe1rio? "),o.TgZ(21,"a",15),o._uU(22,"Fa\xe7a login"),o.qZA(),o.qZA()),2&n){let s,a,m,p,g;o.xp6(2),o.Q6J("formGroup",r.novoUsuarioForm),o.xp6(3),o.Q6J("ngIf",(null==(s=r.novoUsuarioForm.get("email"))||null==s.errors?null:s.errors.required)&&(null==(s=r.novoUsuarioForm.get("email"))?null:s.touched)),o.xp6(1),o.Q6J("ngIf",(null==(a=r.novoUsuarioForm.get("email"))||null==a.errors?null:a.errors.email)&&(null==(a=r.novoUsuarioForm.get("email"))?null:a.touched)),o.xp6(3),o.Q6J("ngIf",(null==(m=r.novoUsuarioForm.get("fullName"))?null:m.errors)&&(null==(m=r.novoUsuarioForm.get("fullName"))?null:m.touched)),o.xp6(3),o.Q6J("ngIf",(null==(p=r.novoUsuarioForm.get("userName"))||null==p.errors?null:p.errors.minusculo)&&(null==(p=r.novoUsuarioForm.get("userName"))?null:p.touched)),o.xp6(1),o.Q6J("ngIf",null==(g=r.novoUsuarioForm.get("userName"))||null==g.errors?null:g.errors.usuarioExistente),o.xp6(3),o.Q6J("ngIf",null==r.novoUsuarioForm.errors?null:r.novoUsuarioForm.errors.senhaIgualUsuario),o.xp6(5),o.Q6J("routerLink",o.DdM(8,y))}},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,c.O5,l.yS,Z.c],styles:[""]}),e})();var x=u(3342),Y=u(2374);const Q=v.N.apiURL;let q=(()=>{class e{constructor(n,r){this.httpClient=n,this.usuarioService=r}autenticar(n,r){return this.httpClient.post(`${Q}/user/login`,{userName:n,password:r},{observe:"response"}).pipe((0,x.b)(s=>{var a;const m=null!==(a=s.headers.get("x-access-token"))&&void 0!==a?a:"";this.usuarioService.salvaToken(m)}))}}return e.\u0275fac=function(n){return new(n||e)(o.LFG(f.eN),o.LFG(Y.i))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function H(e,t){1&e&&o._UZ(0,"app-mensagem",12)}function k(e,t){1&e&&o._UZ(0,"app-mensagem",13)}const w=function(){return["novousuario"]},j=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-home"]],decls:6,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-6","mb-2"],["src","assets/img/home.jpg","alt","Imagem de um gato para as boas vindas",1,"img-fluid","d-none","d-sm-block"]],template:function(n,r){1&n&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"div",2),o._UZ(5,"router-outlet"),o.qZA(),o.qZA(),o.qZA())},directives:[l.lC],styles:[""]}),e})(),children:[{path:"",component:(()=>{class e{constructor(n,r){this.authService=n,this.router=r,this.usuario="",this.senha=""}ngOnInit(){}login(){this.authService.autenticar(this.usuario,this.senha).subscribe(()=>{this.router.navigate(["animais"])},n=>{alert("Usu\xe1rio ou senha inv\xe1lido"),console.log(n)})}}return e.\u0275fac=function(n){return new(n||e)(o.Y36(q),o.Y36(l.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:18,vars:7,consts:[[1,"text-center"],[1,"form","mt-4","d-grid","gap-3",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["placeholder","Nome do usu\xe1rio","name","usuario","required","",1,"form-control",3,"ngModel","ngModelChange"],["campoUsuario","ngModel"],["mensagem","Usu\xe1rio obrigat\xf3rio",4,"ngIf"],["type","password","placeholder","Senha","name","senha","required","",1,"form-control",3,"ngModel","ngModelChange"],["campoSenha","ngModel"],["mensagem","Senha obrigat\xf3ria",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[3,"routerLink"],["mensagem","Usu\xe1rio obrigat\xf3rio"],["mensagem","Senha obrigat\xf3ria"]],template:function(n,r){if(1&n&&(o.TgZ(0,"h4",0),o._uU(1,"Login"),o.qZA(),o.TgZ(2,"form",1,2),o.NdJ("ngSubmit",function(){return r.login()}),o.TgZ(4,"div",3),o.TgZ(5,"input",4,5),o.NdJ("ngModelChange",function(a){return r.usuario=a}),o.qZA(),o.YNc(7,H,1,0,"app-mensagem",6),o.qZA(),o.TgZ(8,"div",3),o.TgZ(9,"input",7,8),o.NdJ("ngModelChange",function(a){return r.senha=a}),o.qZA(),o.YNc(11,k,1,0,"app-mensagem",9),o.qZA(),o.TgZ(12,"button",10),o._uU(13,"Login"),o.qZA(),o.qZA(),o.TgZ(14,"p"),o._uU(15," N\xe3o \xe9 um usu\xe1rio?"),o.TgZ(16,"a",11),o._uU(17,"Cadastre-se"),o.qZA(),o.qZA()),2&n){const s=o.MAs(3),a=o.MAs(6),m=o.MAs(10);o.xp6(5),o.Q6J("ngModel",r.usuario),o.xp6(2),o.Q6J("ngIf",a.invalid&&a.touched),o.xp6(2),o.Q6J("ngModel",r.senha),o.xp6(2),o.Q6J("ngIf",m.invalid&&m.touched),o.xp6(1),o.Q6J("disabled",s.invalid),o.xp6(4),o.Q6J("routerLink",o.DdM(6,w))}},directives:[i._Y,i.JL,i.F,i.Fj,i.Q7,i.JJ,i.On,c.O5,l.yS,Z.c],styles:[""]}),e})()},{path:"novousuario",component:M}]}];let R=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[l.Bz.forChild(j)],l.Bz]}),e})();var z=u(7764);let B=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[c.ez,R,i.u5,z.m]]}),e})()}}]);